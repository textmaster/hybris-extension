<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ [y] hybris Platform
  ~
  ~ Copyright (c) 2000-2015 hybris AG
  ~ All rights reserved.
  ~
  ~ This software is the confidential and proprietary information of hybris
  ~ ("Confidential Information"). You shall not disclose such Confidential
  ~ Information and shall use it only in accordance with the terms of the
  ~ license agreement you entered into with hybris.
  -->

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="textmasterbackofficeLabelLocator" class="com.hybris.cockpitng.util.labels.ResourcesLabelLocator"
          scope="singleton" init-method="init" lazy-init="false">
        <property name="location" value="/textmasterbackoffice-backoffice-labels/"/>
        <property name="name" value="labels"/>
    </bean>

    <alias name="defaultTextMasterPreviewDataModelUrlResolver" alias="textMasterPreviewDataModelUrlResolver"/>
    <bean id="defaultTextMasterPreviewDataModelUrlResolver"
          class="com.textmaster.backoffice.resolvers.DefaultTextMasterPreviewDataModelUrlResolver">
        <property name="productModelUrlResolver" ref="productModelUrlResolver"/>
        <property name="categoryModelUrlResolver" ref="categoryModelUrlResolver"/>
        <property name="pageMapping" ref="textMasterPreviewUrlResolverPageMappings"/>
    </bean>

    <alias name="defaultTextMasterPreviewUrlPageResolver" alias="textMasterPreviewUrlPageResolver"/>
    <bean id="defaultTextMasterPreviewUrlPageResolver"
          class="de.hybris.platform.cmscockpit.resolvers.PreviewUrlPageResolver">
        <property name="cmsAdminSiteService" ref="cmsAdminSiteService"/>
    </bean>

    <!-- Default CMS Preview Loader -->
    <alias name="defaultTextMasterCmsPreviewLoader" alias="textMasterCmsPreviewLoader"/>
    <bean id="defaultTextMasterCmsPreviewLoader" class="com.textmaster.backoffice.resolvers.TextMasterDefaultPreviewLoader"/>

    <alias name="defaultTextMasterPreviewService" alias="textMasterPreviewService"/>
    <bean id="defaultTextMasterPreviewService" class="com.textmaster.backoffice.services.impl.DefaultTextMasterPreviewService">
        <property name="modelService" ref="modelService"/>
        <property name="commonI18NService" ref="commonI18NService"/>
        <property name="cmsPageService" ref="cmsPageService"/>
        <property name="cmsPreviewService" ref="cmsPreviewService"/>
        <property name="previewLoader" ref="textMasterCmsPreviewLoader"/>
        <property name="siteBaseUrlResolutionService" ref="siteBaseUrlResolutionService"/>
        <property name="textMasterPreviewUrlPageResolver" ref="textMasterPreviewUrlPageResolver"/>
    </bean>

    <!-- Action Renderers -->
    <alias name="defaultTextMasterDocumentActionsRenderer" alias="textMasterDocumentActionsRenderer"/>
    <bean id="defaultTextMasterDocumentActionsRenderer"
          class="com.textmaster.backoffice.renderer.TextMasterDocumentActionsRenderer" scope="prototype">
        <property name="textMasterPreviewService" ref="textMasterPreviewService"/>
        <property name="impersonationService" ref="impersonationService"/>
        <property name="cmsAdminSiteService" ref="cmsAdminSiteService"/>
    </bean>

    <alias name="defaultTextMasterProjectActionsRenderer" alias="textMasterProjectActionsRenderer"/>
    <bean id="defaultTextMasterProjectActionsRenderer"
          class="com.textmaster.backoffice.renderer.TextMasterProjectActionsRenderer">
        <property name="textMasterProjectService" ref="textMasterProjectService"/>
    </bean>

    <alias name="defaultTextMasterProjectPriceRenderer" alias="textMasterProjectPriceRenderer"/>
    <bean id="defaultTextMasterProjectPriceRenderer"
          class="com.textmaster.backoffice.renderer.TextMasterProjectPriceRenderer">
        <property name="priceDataFactory" ref="textMasterPriceDataFactory" />
    </bean>

    <alias name="defaultAbstractTextMasterRenderer" alias="abstractTextMasterRenderer"/>
    <bean id="defaultAbstractTextMasterRenderer"
          class="com.textmaster.backoffice.renderer.AbstractTextMasterRenderer" abstract="true">
        <property name="widgetRenderingUtils" ref="widgetRenderingUtils" />
        <property name="propertyValueService" ref="propertyValueService" />
    </bean>

    <alias name="defaultTextMasterDateRenderer" alias="textMasterDateRenderer"/>
    <bean id="defaultTextMasterDateRenderer"
          class="com.textmaster.backoffice.renderer.TextMasterDateRenderer" parent="abstractTextMasterRenderer" />

    <alias name="defaultTextMasterEnumRenderer" alias="textMasterEnumRenderer"/>
    <bean id="defaultTextMasterEnumRenderer"
          class="com.textmaster.backoffice.renderer.TextMasterEnumRenderer" parent="abstractTextMasterRenderer">
        <property name="enumerationService" ref="enumerationService" />
    </bean>

    <alias name="defaultTextMasterProjectNbDocumentsRenderer" alias="textMasterProjectNbDocumentsRenderer"/>
    <bean id="defaultTextMasterProjectNbDocumentsRenderer"
          class="com.textmaster.backoffice.renderer.TextMasterProjectNbDocumentsRenderer" />

    <!-- Factories -->
    <alias name="defaultTextMasterPriceDataFactory" alias="textMasterPriceDataFactory" />
    <bean name="defaultTextMasterPriceDataFactory" class="com.textmaster.backoffice.factories.DefaultTextMasterPriceDataFactory" parent="defaultPriceDataFactory" />
</beans>
